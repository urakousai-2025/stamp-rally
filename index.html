<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>スタンプラリー</title>
</head>
<body>
  <h1>スタンプラリー</h1>
  <div id="progress"></div>

  <script>
    const spots = ['spot1','spot2','spot3','spot4','spot5','spot6','spot7','spot8'];
    const cookies = document.cookie.split('; ').reduce((acc, v) => {
      const [key, val] = v.split('=');
      acc[key] = val;
      return acc;
    }, {});
    const collected = spots.filter(s => cookies[s] === 'done');
    document.getElementById('progress').textContent =
      `現在 ${collected.length}/${spots.length} 個 集めました`;
    if (collected.length === spots.length) {
      document.body.insertAdjacentHTML('beforeend',
        '<p>コンプリート！景品交換場所に行こう！</p>');
    }
  </script>
</body>
</html>
